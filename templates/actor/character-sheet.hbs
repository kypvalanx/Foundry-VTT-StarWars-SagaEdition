<form class="{{cssClass}}" autocomplete="off">
    <div class="flex flex-col" style="height:100%">
        <div>

            {{#each actor.warnings as |warning id|}}
            <span class="warning">{{{warning}}}</span><br />
            {{/each}}
            {{#each actor.errors as |error id|}}
            <span class="error">{{{error}}}</span><br />
            {{/each}}
        </div>
        <div class="flex-grow1">
            {{!-- Sheet Tab Navigation --}}
            <nav class="sheet-tabs tabs" data-group="primary">
                <a class="item" data-tab="summary">Summary</a>
                <a class="item" data-tab="charClass">Class</a>
                {{#if actor.isBeast}}<a class="item" data-tab="beast">Beast</a>{{/if}}
                <a class="item" data-tab="equipment">Equipment</a>
                <a class="item" data-tab="feats">Feats & Talents</a>
                {{#unless actor.hideForce}}<a class="item" data-tab="force">The Force</a>{{/unless}}
                <a class="item" data-tab="affiliations">Affiliations & Languages</a>
                <a class="item" data-tab="traits">Traits</a>
                <a class="item" data-tab="modes">Modes</a>
                <a class="item" data-tab="changes">Changes</a>
                <a class="item" data-tab="description">Notes</a>
                <a class="item" data-tab="settings">Settings</a>

            </nav>

            {{!-- Sheet Body --}}
            <section class="sheet-body">
                {{!-- Summary Page --}}
                <div class="tab summary flex-col" data-group="primary" data-tab="summary">
                    <div class="flex flex-row">
                        {{> 'swse.actor-ability-scores'}}
                        {{> 'swse.actor-summary'}}
                    </div>
                    <div class="flex flex-row">
                        <div class="flex flex-col flex-grow">
                            <!--health-->
                            {{> 'swse.actor-health'}}
                        </div>
                        <div class="flex flex-col">
                            <div class="flex-row">
                                <div class="flex-col">
                                    <!--condition-->
                                    {{> 'swse.actor-condition'}}
                                </div>
                                <!--portrait-->
                                {{> 'swse.actor-portrait'}}
                            </div>
                            <!--darkside-->
                            {{> 'swse.actor-darkside'}}
                        </div>

                    </div>
                    <div class="flex flex-row">
                        <!--defenses-->
                        {{> 'swse.actor-defenses'}}
                    </div>
                    <div class="flex flex-row">
                        {{> 'swse.actor-weapon-armor-summary'}}
                        {{> 'swse.actor-skills'}}
                    </div>
                </div>

                {{!-- Class Page --}}
                <div class="tab summary" data-group="primary" data-tab="charClass">
                    {{> 'swse.actor-classes'}}
                </div>

                {{!-- Beast Page --}}
                <div class="tab beast" data-group="primary" data-tab="beast">
                    <h2><label class="resource-label">Beast
                            <a data-action="compendium" data-type="Item" data-pack="swse.beast components"
                                title="Beast"><i class="fas fa-folder-plus"></i></a></label></h2>
                    {{> 'swse.item-list' container="natural-weapons" label="Natural Weapons" items=actor.naturalWeapons
                    draggable=false quantity=false delete="always"}}
                    {{> 'swse.item-list' container="special-senses" label="Special Senses" items=actor.specialSenses
                    draggable=false quantity=false delete="always"}}
                    {{> 'swse.item-list' container="species-types" label="Species Types" items=actor.speciesTypes
                    draggable=false quantity=false delete="always"}}
                    {{> 'swse.item-list' container="special-qualities" label="Special Qualities"
                    items=actor.specialQualities draggable=false quantity=false delete="always"}}

                </div>

                {{!-- Biography Tab --}}
                <div class="tab biography" data-group="primary" data-tab="description">
                    {{editor details.description target="system.details.description" button=false owner=owner
                    editable=editable}}
                </div>

                {{!-- Owned Equipment Tab --}} {{!-- TODO break this out into a seperate file--}}
                <div class="tab items" data-group="primary" data-tab="equipment">
                    <div>
                        <h2>
                            <label class="resource-label">Equipment
                                <a data-action="compendium" data-type="Item" data-pack="swse.armor"
                                    data-action-target="swse.armor" title="Armor"><i class="fas fa-folder-plus"></i></a>
                                <a data-action="compendium" data-type="Item" data-pack="swse.weapons"
                                    data-action-target="swse.weapons" title="Weapons"><i
                                        class="fas fa-folder-plus"></i></a>
                                <a data-action="compendium" data-type="Item" data-pack="swse.equipment"
                                    data-action-target="swse.equipment" title="Equipment"><i
                                        class="fas fa-folder-plus"></i></a>
                                <a data-action="compendium" data-type="Item" data-pack="swse.templates"
                                    data-action-target="swse.templates" title="Templates"><i
                                        class="fas fa-folder-plus"></i></a></label>
                        </h2>
                    </div>
                    <div title="Strain Capacity: {{actor.strainCapacity}}; Maximum Capacity: {{actor.maximumCapacity}}">
                        {{actor.carriedWeight}}/{{actor.heavyLoad}} kgs</div>
                    <div class="grid-2col">
                        {{> 'swse.item-list' container="unequipped" label="Unequipped" items=actor.unequipped
                        draggable=true quantity=true delete="always"}}
                        {{> 'swse.item-list' container="equipped" label="Equipped" items=actor.equipped draggable=true
                        quantity=true delete="always"}}
                    </div>

                    {{> 'swse.item-list' container="general-equipment" label="General Equipment" items=actor.inventory
                    quickCreate="equipment" createNew="equipment" draggable=true quantity=true delete="always"}}

                    {{> 'swse.credit-chip'}}

                </div>


                <div class="tab summary" data-group="primary" data-tab="droid">

                </div>

                {{!-- Owned Feats Tab --}}
                <div class="tab items" data-group="primary" data-tab="feats">
                    {{> 'swse.item-list' bigLabel="Feats" compendiumFilter="-type:feat" container="items-list" fields=
                    (arr "Source" "Prerequisites") items=actor.itemTypes.feat draggable=false quantity=false
                    delete="unSupplied" overrideDelete=system.settings.ignorePrerequisites.value
                    description="expandable" controls='<button class="flex-0" style="flex-basis:180px"
                        data-action="gm-bonus">Add GM Bonus</button>'}}
                    {{> 'swse.item-list' bigLabel="Talents" compendiumFilter="-type:talent" container="items-list"
                    fields= (arr "Source" "Prerequisites") items=actor.itemTypes.talent draggable=false quantity=false
                    delete="unSupplied" overrideDelete=system.settings.ignorePrerequisites.value
                    description="expandable"}}
                </div>

                {{!-- Owned Traits Tab --}}
                <div class="tab items" data-group="primary" data-tab="traits">
                    {{> 'swse.item-list' bigLabel="Traits" compendiumFilter="-type:trait" container="items-list" fields=
                    (arr "Source" "Prerequisites") items=traits draggable=false quantity=false delete="unSupplied"
                    overrideDelete=system.settings.ignorePrerequisites.value description="expandable" controls='<button
                        class="flex-0" style="flex-basis:180px" data-action="gm-bonus">Add GM Bonus</button>'}}
                </div>

                {{!-- Owned Powers Tab --}}
                <div class="tab items" data-group="primary" data-tab="force">
                    {{> 'swse.item-list' container="forcePowers" bigLabel="Force Powers" items=actor.itemTypes.powers
                    draggable=false quantity=true usable=true delete="always" description="expandable"
                    createNew='forcePower' quickCreate='forcePower' compendiumFilter='-type:forcePower'}}

                    <br />
                    <div>
                        <h2><label class="resource-label">Force Secrets <a data-action="compendium" data-type="Item"
                                    data-filter="-type:forceSecret" title="{{localize " Open Compendium"}}"><i
                                        class="fas fa-folder-plus"></i></a></label></h2>
                    </div>
                    <ol class="items-list">
                        {{#each actor.itemTypes.forceSecret as |item id|}}
                        <li class="item flexrow" data-item-id="{{item._id}}">
                            <h4 class="item-name"><b>{{item.name}}</b></h4>
                            <h4 class="item-name"><b>Prerequisites:</b> {{item.prerequisites}}</h4>
                            <div class="item-controls">
                                <a data-action="view" class="item-control" title="Edit Item"><i
                                        class="fas fa-edit"></i></a>
                                <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
                            </div>
                        </li>
                        {{/each}}
                    </ol>
                    <br />
                    <div>
                        <h2><label class="resource-label">Force Techniques <a data-action="compendium" data-type="Item"
                                    data-filter="-type:forceTechnique" title="{{localize " Open Compendium"}}"><i
                                        class="fas fa-folder-plus"></i></a></label></h2>
                    </div>
                    <ol class="items-list">
                        {{#each actor.itemTypes.forceTechnique as |item id|}}
                        <li class="item flexrow" data-item-id="{{item._id}}">
                            <h4 class="item-name"><b>{{item.name}}</b></h4>
                            <h4 class="item-name"><b>Prerequisites:</b> {{item.prerequisites}}</h4>
                            <div class="item-controls">
                                <a data-action="view" class="item-control" title="Edit Item"><i
                                        class="fas fa-edit"></i></a>
                                <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
                            </div>
                        </li>
                        {{/each}}
                    </ol>
                    <br />
                    <div>
                        <h2><label class="resource-label">Force Regimens <a data-action="compendium" data-type="Item"
                                    data-filter="-type:forceRegimen" title="{{localize " Open Compendium"}}"><i
                                        class="fas fa-folder-plus"></i></a></label></h2>
                    </div>
                    <ol class="items-list">
                        {{#each actor.itemTypes.forceRegimen as |item id|}}
                        <li class="item flexrow" data-item-id="{{item._id}}">
                            <h4 class="item-name"><b>{{item.name}}</b></h4>
                            <h4 class="item-name"><b>Prerequisites:</b> {{item.prerequisites}}</h4>
                            <div class="item-controls">
                                <a data-action="view" class="item-control" title="Edit Item"><i
                                        class="fas fa-edit"></i></a>
                                <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
                            </div>
                        </li>
                        {{/each}}
                    </ol>
                </div>

                <div class="tab affiliations" data-group="primary" data-tab="affiliations">
                    {{> 'swse.item-list' container="affiliations" bigLabel="Affiliations"
                    items=actor.itemTypes.affiliation draggable=false delete="always" description="expandable"
                    createNew='affiliation' compendiumFilter='-type:affiliation'}}
                    {{> 'swse.item-list' container="languages" bigLabel="Languages" items=actor.itemTypes.language
                    draggable=false delete="always" description="expandable" createNew='language'}}

                </div>

                <div class="tab changes" data-group="primary" data-tab="changes">
                    {{> 'swse.change-list' changes=actor.changes inheritedChanges=actor.inheritedChanges modes=modes}}
                </div>

                <div class="tab settings" data-group="primary" data-tab="settings">
                    <div class="flexcol">
                        {{#each settings}}
                        {{> 'swse.setting'}}
                        {{/each}}
                    </div>
                </div>

                <div class="tab modes" data-group="primary" data-tab="modes">
                    <div class="section-header flexrow">
                        <div class="entry"></div>
                        <div class="section-header-controls">
                            <a class="control" data-action="effect-control" data-type="add-mode"><i
                                    class="far fa-plus-square"></i></a>
                        </div>
                    </div>
                    <ol class="items-list">
                        {{#each actor.effects as |mode id|}}
                        {{#unless mode.flags.swse.itemModifier}}
                        <li class="item flexrow draggable effect{{#if mode.isDisabled}} disabled{{/if}}"
                            data-effect-id="{{mode._id}}" data-uuid="{{mode.uuid}}">
                            <div class="item-image"><img src="{{mode.img}}" title="{{mode.name}}" width="24"
                                    height="24" />
                            </div>
                            <h4 class="item-name">{{mode.name}}</h4>
                            <div>{{#if mode.hasLinks}}<i class="fas fa-link" title="Has Links"></i>{{/if}}</div>
                            <div class="item-controls">
                                <input type="checkbox" {{#unless mode.disabled}}checked{{/unless}} data-type="disable"
                                    data-action="effect-control" data-effect-id="{{mode._id}}">
                                <a data-type="view" data-action="effect-control" data-effect-id="{{mode._id}}"
                                    class="item-control" title="Edit Item"><i class="fas fa-edit"></i></a>
                                <a data-type="delete" data-action="effect-control" data-effect-id="{{mode._id}}"
                                    class="item-control" title="Delete Item"><i class="fas fa-trash"></i></a>
                            </div>
                        </li>
                        {{/unless}}
                        {{/each}}
                    </ol>
                </div>
            </section>
        </div>
    </div>
</form>